<h2>pypilot hydraulic motor controller</h2>

<!-- <img src=""> -->

<p>For brushed DC motors.  Can drive most existing tillerpilots and mechanical wheel pilots.
<ul>
  <li>arduino nano with free software</li>
  <li>all n-fet hbridge: highest efficiency</li>
  <li>optical data isolation</li>
  <li>reverse polarity protection</li>
  <li>software over-current and over-temperature protection</li>
  <li>30 amp fuse</li>
  <li>12 and 24 volts systems supported</li>
  <li>standby current less than 10mA</li>
</ul>

<table border=0>
  <tr><td>Voltage</td><td>11.2-30v</td></tr>
  <tr><td>Controller Current</td><td>15mA to 22mA</td></tr>
  <tr><td>Motor Current</td><td>up to 20A</td></tr>
</table>
<h6>* Motor current is how many amps the motor draws at maximum speed moving the rudder.</h6>

<h3>Efficiency</h3>
<p><img src="hydraulic_efficiency.png" />
  <h6>* ratio of motor power divided by motor power + controller total consumption</h6>

<h3>Power Connections</h3>
<p>5 large wires attach to an external terminal block:
<table border=1>
  <tr><td>1</td><td>Clutch -</td><td>Yellow</td></tr>
  <tr><td>2</td><td>VCC, Clutch +</td><td>Red</td></tr>
  <tr><td>3</td><td>GND</td><td>Black</td></tr>
  <tr><td>4</td><td>Motor A</td><td>Blue or Green</td></tr>
  <tr><td>5</td><td>Motor B</td><td>Blue or Green</td></tr>
</table>
<p>The power should be applied to the red and black wires.  The motor is powered from the two blue or green wires.  An optional clutch to engage the drive can be connected to the yellow and red wires.

<h3>Serial Data Connection</h3>
<table border=1>
    <tr><td>1</td><td>2</td><td>3</td><td>purpose</td><tr>raspberry pin</td></tr>
    <tr><td>Red</td><td>Brown</td><td>Black</td><td>+3.3v</td><td>1</td></tr>
    <tr><td>Green</td><td>White</td><td>Brown</td><td>tx</td><td>8</td></tr>
    <tr><td>Blue</td><td>Blue</td><td>Green</td><td>rx</td><td>10</td></tr>
    <tr><td>Black</td><td>Black</td><td>Blue</td><td>0v, GND</td><td>6, 9</td></tr>
</table>
<p>Note: wires colors will be one of 3 possibilities depending on the controller.
    
<p><h3>End stops</h3>
<p>3 wires can be used for optional end stops.  End stops prevent stalling the motor and stress to the drive.
<p>Black - GND, 0v.
<p>Yellow/Red - port/starboard stop switches, shorted to ground prevents further movement in that direction.
  
<p><h3>Rudder Feedback</h3>
<p>3 wires are used for optional rudder feedback.
<ul>
<li>Black - GND
<li>Yellow - voltage angle, from GND to Vcc
<li>Red - +5v
</ul>
<br>
A potentiometer with 3 wires can be connected to these 3 wires.
The potentiomter should range from 1k ohms to 100k ohms.  Recommend 10k.
<p>
  A potentiometer with only 2 wires can connect to yellow and black pins.  A resistor should be added from red to yellow of 1k ohms.
<p>
  A hall effect sensor with analog output can be connected to these 3 wires.
<h6>* Controllers Before October 2019 cannot be used with a hall effect rudder feedback without a small modification.</h6>

<p><h3>Motor Temperature Sensor</h3>
<p>Optional 10k NTC (2 wires) for temperature of the electric motor.
  <p>This is generally not needed because most motors will not overheat unless stalled for prolonged periods.  It can be used to prevent the motor or drive system from overheating and burning out.
